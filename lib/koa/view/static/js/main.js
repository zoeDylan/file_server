"use strict";!function(t){function e(r){if(i[r])return i[r].exports;var a=i[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){(function(t){var e=i(1),r=i(2),a=new Vue({el:"#__dir",data:{list:[],dirPath:t,savePath:[],msg:"",error:!1},methods:{getDir:function(t){this.dirPath=t||this.dirPath,document.location.hash="#dir="+this.dirPath,e.getDir(this.dirPath,function(t){if(t.status){a.error=!1,a.msg="",t=t.data,a.list=[];var e={},i=[],s=[],o=[],n=[];if(t.forEach(function(t){e[t.name]=t,"file"==t.type?s.push(t.name):"dir"==t.type?o.push(t.name):n.push(t.name)}),s=r.letterUp(s),o=r.letterUp(o),n=r.letterUp(n),i=i.concat(o,n,s),i.forEach(function(t){t=e[t],a.list.push({name:t.name,path:t.fullPath,type:t.type,error:t.error})}),a.savePath.indexOf(a.dirPath)>-1){var u=a.savePath.indexOf(a.dirPath);a.savePath.splice(u,1)}a.savePath.unshift(a.dirPath),a.savePath.splice(10)}else a.error=!0,a.msg=t.msg})},getFile:function(t){document.location.href="/file?path="+t+"&dir="+this.dirPath}}}),s=0;$("input").keydown(function(t){switch(t.keyCode){case 13:a.getDir($("input").val()),s=0;break;case 38:s--,s=s<0?$(".history .list-group li").length-1:s,$("input").val($(".history .list-group li").eq(s).html()),$(".history .list-group li").removeClass("list-group-item-success").eq(s).addClass("list-group-item-success");break;case 40:s=s>$(".history .list-group li").length-1?0:s,$("input").val($(".history .list-group li").eq(s).html()),$(".history .list-group li").removeClass("list-group-item-success").eq(s).addClass("list-group-item-success"),s++}}),$("input").on("focus",function(){s=0,$(".history").addClass("active")}),$("input").on("blur",function(){s=0,$(".history").removeClass("active")}),e.getHistory(function(t){(t.dir||location.hash.replace("#dir=",""))&&a.getDir(t.data.dir||location.hash.replace("#dir=","")||t.data.savePath[0]),a.savePath=t.data.savePath}),window.onhashchange=function(t){a.dirPath=location.hash.replace("#dir=",""),a.getDir()},window._dir=a}).call(e,"/")},function(t,e){var i=function(){function t(t,e){a&&(a=!1,e=e||function(){},$.ajax({type:"post",url:"./dir",data:{path:t},dataType:"json",success:function(t){e(t)},error:function(t){e({status:!1,msg:"网络错误！"})},complete:function(t){a=!0}}))}function e(){return r}function i(t){s&&(s=!1,$.ajax({type:"post",url:"/history",dataType:"json",success:function(e){t(e)},error:function(e){t({status:!1,msg:"网络错误!"})},complete:function(t){s=!0}}))}var r={lastPath:""},a=!0,s=!0;return{getDir:t,getData:e,getHistory:i}}();t.exports=i},function(t,e){var i=function(){function t(t){return t.sort(function(t,e){return t.localeCompare(e)})}return{letterUp:t}}();t.exports=i}]);