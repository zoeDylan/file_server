"use strict";!function(t){function e(r){if(i[r])return i[r].exports;var s=i[r]={exports:{},id:r,loaded:!1};return t[r].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){(function(t){var e=i(1),r=i(2),s=new Vue({el:"#__dir",data:{list:[],dirPath:t,savePath:[],msg:"",error:!1},methods:{getDir:function(t){this.dirPath=t||this.dirPath,document.location.hash="#dir="+this.dirPath,e.getDir(this.dirPath,function(t){if(t.status){s.error=!1,s.msg="",t=t.data,s.list=[];var e={},i=[],a=[],o=[],n=[];if(t.forEach(function(t){e[t.name]=t,"file"==t.type?a.push(t.name):"dir"==t.type?o.push(t.name):n.push(t.name)}),a=r.letterUp(a),o=r.letterUp(o),n=r.letterUp(n),i=i.concat(o,n,a),i.forEach(function(t){t=e[t],s.list.push({name:t.name,path:t.fullPath,type:t.type,error:t.error})}),s.savePath.indexOf(s.dirPath)>-1){var u=s.savePath.indexOf(s.dirPath);s.savePath.splice(u,1)}s.savePath.unshift(s.dirPath),s.savePath.splice(10)}else s.error=!0,s.msg=t.msg})},getFile:function(t){document.location.href="/file?path="+t+"&dir="+this.dirPath}}}),a=0;$("input").keydown(function(t){switch(t.keyCode){case 13:s.getDir($("input").val()),a=0;break;case 38:a--,a=a<0?$(".history .list-group li").length-1:a,$("input").val($(".history .list-group li").eq(a).html()),$(".history .list-group li").removeClass("list-group-item-success").eq(a).addClass("list-group-item-success");break;case 40:a=a>$(".history .list-group li").length-1?0:a,$("input").val($(".history .list-group li").eq(a).html()),$(".history .list-group li").removeClass("list-group-item-success").eq(a).addClass("list-group-item-success"),a++}}),$("input").on("focus",function(){a=0,$(".history .list-group li").removeClass("list-group-item-success"),$(".history").addClass("active")}),$("input").on("blur",function(){setTimeout(function(){$(".history").removeClass("active")},100)}),e.getHistory(function(t){(t.dir||location.hash.replace("#dir=",""))&&s.getDir(t.data.dir||location.hash.replace("#dir=","")||t.data.savePath[0]),s.savePath=t.data.savePath}),window.onhashchange=function(t){s.dirPath=location.hash.replace("#dir=",""),s.getDir()},window._dir=s}).call(e,"/")},function(t,e){var i=function(){function t(t,e){s&&(s=!1,e=e||function(){},$.ajax({type:"post",url:"./dir",data:{path:t},dataType:"json",success:function(t){e(t)},error:function(t){e({status:!1,msg:"网络错误！"})},complete:function(t){s=!0}}))}function e(){return r}function i(t){a&&(a=!1,$.ajax({type:"post",url:"/history",dataType:"json",success:function(e){t(e)},error:function(e){t({status:!1,msg:"网络错误!"})},complete:function(t){a=!0}}))}var r={lastPath:""},s=!0,a=!0;return{getDir:t,getData:e,getHistory:i}}();t.exports=i},function(t,e){var i=function(){function t(t){return t.sort(function(t,e){return t.localeCompare(e)})}return{letterUp:t}}();t.exports=i}]);